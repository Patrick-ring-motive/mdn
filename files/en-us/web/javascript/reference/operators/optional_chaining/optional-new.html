<p>
  To emulate using optional chaining with the <code>new</code> operator we can use this function <code>newq</code>
</p>
<div class="language-js highlighter-rouge">
    <div class="highlight">
    <pre class="highlight" precode>
<code precode>function newq(...args){
   const fn = args.shift();
   if(fn != null) return new fn(...args);
}

newq(Intl?.DateTimeFormat);//undefined if the object does not exist

const entries = [["Content-Type","text/html"]];
const headers = newq(q(()=>Headers),entries)
              ?? newq(q(()=>Map,entries)
              ?? entries.reduce((y, x) => ((y[x[0]] = x[1]), y), {}));</code></pre>
</div>
</div>
<br>
